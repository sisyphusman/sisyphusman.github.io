---
post: layout
title: 컴퓨터 구조 CS:APP 2장 - 6 -
category: cs
---

# Index

- [비부호형과 부호형 간의 변환](#비부호형과-부호형-간의-변환)
- [C에서 부호형과 비부호형의 비교](#c에서-부호형과-비부호형의-비교)
- [수의 비트 표시를 확장하기](#수의-비트-표시를-확장하기)
- [Signed와 Unsigned에 관한 조언](#signed와-unsigned에-관한-조언)

#### 비부호형과 부호형 간의 변환

C는 서로 다른 숫자 데이터 타입들 간에 **캐스팅(casting)**을 허용함

음수값을 비부호형으로 전환하면 **0**이 될 수도 있고  

비부호형 값을 2의 보수로 변환하면 **TMax**가 될 수도 있다

```c
  unsigned u = 4294967295u;
  int     tu = (int) u;
  printf("u = %u, tu = %d \n", u, tu); 
```

2의 보수 컴퓨터에서 실행할 때, 다음과 같은 결과가 출력된다

u = 4294967295, tu = -1

u는 32비트 2진수로 0xFFFFFFFF이다

이것을 int로 캐스팅하게 되면 2의 보수로 -1이 된다

숫자 값은 변할 수 있지만, **비트 패턴**은 변하지 않는다

&nbsp;

#### C에서 부호형과 비부호형의 비교

일반적으로 대부분의 수들은 기본적으로 **부호형**이다

상수 12345나 0x1A2B를 선언할때 이 값은 부호형으로 간주된다

12345u, 0x1A2Bu와 같이 문자 "U"나 "u"를 접미어로 추가하면 **비부호형 상수**로 만들게 된다

![C 변환 규칙 효과](/assets/images/cs/cs-app/cs-app-02-06-01.png)

비교 오퍼랜드 중 하나가 비부호형이면, 다른 하나는 묵시적으로 **비부호형**으로 cast된다

&nbsp;

#### 수의 비트 표시를 확장하기

비부호형 수를 보다 길이가 긴 데이터 타입으로 변환하기 위해서 단순히 앞에 0들을 추가할 수 있다

이것을 **영의 확장**(zero extension)이라고 한다

2의 보수를 보다 긴 데이터 타입으로 변환하려면 규칙은 **부호 확장**(sign extension)이라 한다

&nbsp;

```c
  short sx = -12345;
  unsigned uy = sx;

  printf("uy = %u:\t", uy);
  show_bytes((byte_pointer) &uy, sizeof(unsigned))
```

&nbsp;

빅 엔디안 머신에서 다음과 같이 출력해준다

  uy = 4294954951: ff ff cf c7

short에서 unsigned로 변환할 때, 

프로그램이 먼저 크기를 바꾸고 다음에 자료형을 바꾼다는 것을 보여준다

1. **크기 확장**(promotion: short -> int)

2. **자료형 변경**(int -> unsigned)

&nbsp;

#### 숫자의 절삭

```c
  int x = 53191;
  short sx = (short) x; /* -12345 */
  int y = sx;           /* -12345 */
```

x를 short로 타입 변환(casting) 할 때 32비트 int를 16비트 short로 **절삭**한다

수를 절삭하면 값이 바뀔 수 있음 이것은 일종의 오버플로우와 같다

#### Signed와 Unsigned에 관한 조언

부호형을 비부호형으로 묵시적인 타입 변환을 하면 **직관적이지 않은** 동작을 보이고

직관적이지 못한 특징들로 프로그램 버그가 발생하기도 하고, 묵시적 타입 변환의

미세한 효과로 인해서 생기는 **버그**들은 알아내기 상당히 어려울 수 있다

C 이외의 다른 언어들은 unsigned 정수를 지원하지 않는다 자바는 signed 정수만을 지원하며

**2의 보수** 산술 연산으로 구현될 것을 요구한다

주소는 본래 unsigned여서 **시스템 프로그래머**들은 unsigned 타입이 유용하다고 생각함

비부호형 값들은 modular 연산, 다중정밀도 산술연산과 같이 숫자들이 워드의 배열로 표시되는 경우와

수학 패키지로 구현할 때 유용하다

<p style="display: flex; justify-content: space-between;">
<a href="cs-02-05.html">이전</a>
<a href="cs-02-07.html">다음</a>
</p>