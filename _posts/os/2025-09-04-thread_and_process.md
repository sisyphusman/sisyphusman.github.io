---
layout: post
title: 스레드와 프로세스
category: os
---

1. 프로세스와 스레드
![프로세스_스레드](/assets/images/os/2025-09-04-thread_and_process.png)

   - 프로세스(Process)
     - 운영체제에서 실행 중인 프로그램의 인스턴스
     - 독립된 메모리 공간을 가짐 - Code, Data, Heap, Stack 영역
     - 다른 프로세스와 주소 공간이 분리되어 있어 안전하지만, 통신(IPC)이 복잡함  
  
   - 스레드(Thread)
     - 프로세스 내부에서 실행되는 흐름 단위
     - 동일 프로세스의 Code, Data, Heap을 공유
     - RIP(프로그램 카운터), RSP(스택 포인터), RAX/RBX/... 같은 레지스터 값들은 스레드마다 독립적으로 관리
     - 각 스레드는 고유한 Stack을 가짐 -> 독립적인 함수 호출/지역변수 관리 가능

2. 프로그램과 프로세스 차이

   - 프로그램(Program)
     - 디스크에 저장된 정적인 실행 파일 (exe, out)
     - 명령어와 데이터의 집합
  
   - 프로세스(Process)
     - 메모리에 로드되어 실제 CPU에서 실행되는 프로그램 인스턴스
     - 실행 중인 프로그램

3. 스레드와 프로세스 차이

   | 구분    | 프로세스            | 스레드                                           |
   | ----- | --------------- | ----------------------------------                   |
   | 정의    | 실행 중인 프로그램      | 프로세스 내 실행 단위                         |
   | 메모리   | 독립적인 주소 공간      | 프로세스의 Code/Data/Heap 공유, Stack은 개별  |
   | 통신    | IPC 필요 (복잡, 느림) | 공유 메모리로 간단히 통신                       |
   | 안정성   | 다른 프로세스 오류 영향 X | 같은 프로세스 내 스레드 오류 시 전체에 영향   |
   | 생성 비용 | 크다 (fork 등)     | 작다 (pthread\_create 등)                       |

4. 동시성과 병렬성
   - 동시성(Concurrency)
     - 여러 작업이 겉보기에는 동시에 실행되는 것
     - 실제로는 CU가 매우 빠르게 Context Switching하며 번갈아 실행
     - 단일 코어 스레딩, I/O 다중
   - 병렬성(Parallelism)
     - 물리적으로 여러 CPU 코어에서 동시에 작업 실행
     - 멀티코어, 멀티프로세서 환경에서만 가능
     - 멀티 코어 스레딩, 멀티 프로세싱

5. 스레드의 스케줄링
   - 프로세스 내에서 실행되는 여러 스레드에 CPU를 분배하는 방식
   - 운영체제보다 주로 라이브러리(pthread, JVM 등) 수준에서 관리됨
   - 정책
     - Round Robin: 순환하며 CPU 할당
     - Priority Scheduling: 우선순위 높은 스레드 먼저 실행
     - Work Stealing: 멀티코어에서 바쁜 스레드가 다른 큐에서 작업 훔치기

6. 프로세스의 스케줄링
   - OS 커널이 CPU를 프로세스들에게 분배하는 방식
   - 정책
     - FCFS(First Come First Serve): 도착 순서대로
     - SJF(Shortest Job First): 실행 시간이 짧은 것 우선
     - Round Robin: 시간 단위로 잘라 순환
     - Priority Scheduling: 우선순위 기반
     - Multilevel Queue / Feedback Queue: 여러 큐와 피드백을 통한 공정성 확보

7. Context Switching 비용
   - 프로세스 전환 시: PCB 저장/복원 + 주소 공간 전환(페이지 테이블 교체) → 비용 큼
     - 페이지 테이블은 가상 주소를 물리 주소로 변환하기 위한 매핑 정보 저장소
     - PCB(Process Control Block): 프로세스 하나하나의 상태를 기록해 두는 자료구조, PCB 저장/복원 = 프로세스의 “스냅샷”을 기록/재현하는 과정
   - 스레드 전환 시: 같은 프로세스라 주소 공간 공유 -> 비용 작음