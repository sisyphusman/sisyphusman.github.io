---
layout: post
title: 에픽게임즈 언리얼 엔진 이야기
category: etc
---

<!--
1. 위쳐 4 엔진 소개 - 언리얼
- 말의 근육 움직임
- 300명 npc 스케줄링
- 나나이트 폴리지, 루멘, 등을 이용하여 프레임 최적화
- 언리얼 애니메이션 최적화, 워커 스레드를 나눠서 최적화
- 스레드 동기화 최적화를 이룸
- 나무(밑둥, 브랜치, 나뭇잎) -> 시각적으로 나눠서 표현
- 클러스트링 기술 사용 - 폴리지에는 적용안됨 -> 복셀 기반으로 해결
2. 그 외에
- 엔진 기본 프레임을 60으로 나오게 기본 지원
- 메타휴먼을 위한 나나이트
- 메가라이트
- 서브스트레이트
- 시뮬레이션 수준의 품질과 성능
3. 오픈둴드
- 소년과 연 - 랜드 스케일2 시스템과 동일
- 3km에서 애니메이션을 실행시 float 정밀도 제한때문에 애니메이션 이상하게 됨
- 이 때문에 오리진을 움직일때 일시적인 렉이 걸림
- 월드 파티션 스트리밍
- 절차적으로 생성된 도시
- 강력한 스트리밍 솔루션
- 액터당 하나의 파일
- 보행자 및 차량용 MASS 엔티티
- 대규모 월드 좌표
- 에디터 내 절차적 콘텐츠 생성
  - 레고 포트나이트
    - 매스 엔티티
    - 런타임 내비게이션
- 월드 파티션 90% 개선
- 자동차로 진행시 물리가 준비가 안되서 땅으로 꺼짐 버그 개선
- 새로운 터레인 시스템
3. 애니메이션
- 애니메이션 저작
  - DCC 이동이 불필요한 모든 기능을 갖춘 애니메이션 툴세트 (머리카락 관련 수동 작업 개선)
  - 피직스로 애니메이팅하기
- 애니메이션 - 리깅 및 디포머
  - 프로시저럴 릭
  - 고급 디포메이션 지원
  - 클로스/머슬/플레시 물리 모델
  - 절차적 물리학
  - UE에서 블렌드 세이프 스컬프팅
  - 구워진 지오메트리 캐시 내보내기
- 애니메이션 - 리타깃팅
  - 모든 종류의 스켈레톤 지원
  - 일반적인 바이패드 자동 리타켓팅(같은 애니메이션을 다른 형태의 물체에 적용)
  - 리타겟팅 오퍼레이션 스택
  - 스케일 소스 모션
  - 공간 인식 리타켓팅
  - 페이션 리타켓팅
- 애니메이션 - 시퀀서
  - 메인 UE 타임라인 툴
  - 다양한 사용성 개선
  - 커스텀 바인딩, 컨디션, 타임 워프
  - 오디오 더빙에 따라서 입술 표현 변경 기능
  - 커스텀 바인딩, 컨디션, 타임 워프
- 런타임 애니메이션
  - 모션 매칭
  - 선택기
  - 리와인드 디버거(실제로 녹화된 장면을 거꾸로 되돌아가면서 그 순간의 선택이 애니메이션에 어떤 영향을 주었는지)
  - 언리얼 애니메이션 프레임워크(UAF)
  - 성능에 집중
  - UAF내 툴 통합: 무버, 모션 매칭, 선택기, 스테이트 트리
  - 궤적 기록 툴
  - 모션 매칭 인터렉션(부딪쳤을때 어떻게 돌아가는지)
- 메타 휴먼
  - 웹기반 메타휴먼 크리에이터(인조이)
  - UE 내 메타휴먼 크리에이터 지원
  - 파리매트릭 바디 및 클로스 리사이징
- 개발자 효율성 및 반복작업 속도
  - 빌드 시스템(호드 CI/CD)
  - 빌드 헬스 시스템 / 호드 어날리틱스
  - 분산 빌드 시스템
  - 디바이스 관리 시스템
  - 자동화된 테스트 진행
- 모든 것의 젠
  - 젠 로더 - 최적화된 로딩
  - 젠 서버 - 로컬, 공유된 & 클라우드 DDC
  - 젠 쿠킹 결과물 저장
  - 젠 쿠킹 결과물
  - 젠 쿠킹 스냅샷
  - 젠 타켓 플랫폼 스트리밍 (포트나이트 26분 걸리던걸 1분 걸리게 함)
- 쿠킹 
  - 멀티 프로세스 쿠킹
- 개발자 반복작업 - 미래 -> 빌드 시간을 줄여주면 퀄리티가 높아줌
  - 에디터 시작, 로드 PIE, UEFN
  - 새로운 저수준 직렬화
  - 증분 쿠킹 디폴트 지원
  - URC
  - 데이터 변환 최소화 모델 활용
  -->  

> 정확한 사실이 아닐 수 있습니다

## 1. 위쳐 4의 엔진 – 언리얼 엔진 5 활용 사례

- 말의 근육 움직임 구현
  - 머슬, 플레시, 클로스 물리 시뮬레이션 기반 애니메이션
- 300명 NPC 스케줄링
  - MASS 시스템을 통한 대규모 에이전트 병렬 처리
- Nanite + 폴리지 최적화
  - 폴리지에는 Nanite 미지원 → 복셀 기반 렌더링으로 우회
- 언리얼 애니메이션 멀티스레드 최적화
  - 워커 스레드 분리 및 스레드 동기화 최적화로 성능 향상
- 나무 구성 요소 분리 표현
  - 트렁크, 브랜치, 잎사귀 시각 요소 별도 최적화
- 클러스터링 기술 사용
  - 폴리지에는 적용 안됨, 복셀 기반 대체 기술 적용

## 2. 엔진 기능 및 성능 기술

- 기본 프레임레이트 60FPS 보장
- 메타휴먼과 Nanite 연동 지원
- 메가라이트 (Lumen) 글로벌 일루미네이션 기술
- 서브스트레이트: 커스터마이징 가능한 셰이딩 모델
- 시뮬레이션 수준의 고품질 그래픽 및 퍼포먼스 제공

## 3. 오픈 월드 구현 기술

- 랜드스케이프 2.0 시스템
- 3km 거리에서 float 정밀도 문제로 애니메이션 이상 현상 발생
- 월드 오리진 이동 시 일시적 렉 발생
- 월드 파티션 시스템
  - 자동 스트리밍 / 액터별 개별 파일 저장
  - 절차적 도시 생성, 강력한 스트리밍 솔루션
- MASS 엔티티 시스템
  - 보행자 및 차량 대규모 처리 지원
- 에디터 내 절차적 콘텐츠 생성 도구
  - 레고 포트나이트 사례
  - 런타임 내비게이션 포함
- 물리 엔진 개선
  - 자동차 지형 충돌 시 버그 해결
- 새로운 터레인 시스템 도입 예정

## 4. 애니메이션 시스템 고도화

### 애니메이션 저작

- DCC 없이 UE 내에서 직접 제작 가능
- 머리카락, 옷 등의 물리 기반 자동화 작업 포함

### 리깅 및 디포머

- 프로시저럴 리깅
- 고급 디포머 및 블렌드 쉐이프 지원
- 구워진 지오메트리 캐시 내보내기 기능

### 리타겟팅

- 다양한 스켈레톤 자동 대응
- 바이패드 자동 리타겟팅
- 스케일링, 공간 인식 기반 리타겟팅
- 리타겟팅 오퍼레이션 스택 제공

### 시퀀서 (Sequencer)

- 메인 타임라인 애니메이션 툴
- 조건 기반 커스텀 바인딩, 타임워프 지원
- 오디오 싱크 기반 입모양 애니메이션 지원

### 런타임 애니메이션

- 모션 매칭
- 선택기(Selector)
- 리와인드 디버거
- 언리얼 애니메이션 프레임워크(UAF)
  - 무버, 스테이트 트리, 선택기 등 통합
- 궤적 기록 및 상호작용 모션 매칭

## 5. 메타휴먼

- 웹 기반 메타휴먼 크리에이터 지원
- 언리얼 내 실시간 메타휴먼 제작 기능
- 파라메트릭 바디 및 클로스 리사이징 기능

## 6. 개발자 효율성 및 반복 작업 개선

- 빌드 시스템: 호드 CI/CD
- 빌드 헬스 및 호드 분석 시스템
- 분산 빌드 시스템
- 디바이스 관리 시스템
- 자동화된 테스트 시스템

## 7. Zen 시스템 (리소스 최적화)

- Zen Loader: 최적화된 로딩 시스템
- Zen Server: 로컬 및 클라우드 DDC 지원
- Zen 쿠킹 결과물 캐시 및 스냅샷 저장
- 멀티 프로세스 쿠킹
- 포트나이트 기준 빌드 시간 26분 → 1분으로 단축

## 8. 반복 작업 속도 향상 및 미래 계획

- 에디터 로딩, PIE 속도 개선
- 증분 쿠킹 디폴트 지원
- UEFN 최적화
- 새로운 직렬화 모델 도입
- URC(Unreal Runtime Compressor)
- 데이터 변환 최소화 모델 적용
